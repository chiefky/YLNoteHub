# 1. 静态库 和 动态库 

静态库：在链接阶段，会将可汇编生成的目标程序与引用的库一起链接打包到可执行文件当中。此时的静态库就不会在改变了，因为它是编译时被直接拷贝一份，复制到目标程序里的。

- `好处`：编译完成后，库文件实际上就没有作用了，目标程序没有外部依赖，直接就可以运行
- `缺点`：由于*静态库会有两份*，所以会导致目标程序的体积增大，对内存、性能、速度消耗很大

动态库：程序编译时并不会链接到目标程序中，目标程序只会存储指向动态库的引用，在程序运行时才被载入。

- 优势：
  - 减少打包之后app的大小：因为不需要拷贝至目标程序中，所以不会影响目标程序的体积，与静态库相比，减少了app的体积大小
  - 共享内存，节约资源：同一份库可以被多个程序使用
  - 通过`更新动态库，达到更新程序`的目的：由于运行时才载入的特性，可以随时对库进行替换，而不需要重新编译代码
- 缺点：动态载入会带来一部分性能损失，使用动态库也会使得程序依赖于外部环境，如果环境缺少了动态库，或者库的版本不正确，就会导致程序无法运行

# 2. APP启动过程

>1. 解析App可执行文件 --> dyld路径，加载dyld， 初始化运行环境，
>2. 加载共享缓存，
>3. 实例化主程序：addImage --> sAllImages;
>4. 加载动态库
>5. 链接主程序
>6. 链接动态库
>7. 弱符号化绑定
>8. 初始化
>9. 最后dyld返回main函数地址，main函数被调用，我们便来到了熟悉的程序入口；

参考：https://www.jianshu.com/p/9223664fee7f

